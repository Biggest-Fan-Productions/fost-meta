language: cpp

git:
  submodules: false

compiler:
    - gcc
    - clang

before_install:
    - sed -i 's/git@github.com:/git:\/\/github.com\//' .gitmodules
    - git submodule init
    - git submodule sync
    - git submodule update

install:
    - sudo apt-get install libboost-all-dev libbz2-dev libssl-dev python-dev uuid-dev
    - if [ "$CXX" = "g++" ]; then sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y; fi
    - if [ "$CXX" = "g++" ]; then sudo apt-get update; fi
    - if [ "$CXX" = "g++" ]; then sudo apt-get install -qq g++-4.8; fi
    - if [ "$CXX" = "g++" ]; then echo "using gcc &#58; 4.8 &#58; g++-4.8 ;" > ~/user-config.jam; fi
    - Boost/install $(lsb_release -cs)

script:
    - ./build toolset=$CC -q

matrix:
    allow_failures:
        - compiler: gcc
